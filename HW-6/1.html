<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Homework</title>
  <style>
    .product {
      width: 200px;
      padding: 10px;
      float: left;
      margin-right: 30px;
      box-shadow: 0 0 4px black;
    }
    /*просто так*/
    .cart {
      width: 200px;
      padding: 10px;
      float: left;
      margin-right: 30px;
      box-shadow: 0 0 4px black;
    }
  </style>
</head>
<body>
<!--
Обязательное задание.

Выполнить все задачи в теге script. Комментарии, в которых написаны задачи, не
стирать, код с решением задачи пишем под комментарием.
-->
<div class="cart">
  <div>Корзина</div>
  <div class="cartcount">В корзине ничего нет</div>
</div>


<div class="product">
  <div class="productName">Товар 1</div>
  <img src="https://picsum.photos/id/367/200/300" alt="">
  <button>В корзину</button>
</div>
<div class="product">
  <div class="productName">Товар 2</div>
  <img src="https://picsum.photos/id/425/200/300" alt="">
  <button>В корзину</button>
</div>
<div class="product">
  <div class="productName">Товар 3</div>
  <img src="https://picsum.photos/id/429/200/300" alt="">
  <button>В корзину</button>
</div>


<script>
  "use strict";

  /*
  1. Установите всем элементам с классом "productName" размер шрифта 24px.
   */
  const elProductNames = document.querySelectorAll('.productName');

  for (const elProductName of elProductNames) {
    elProductName.style.fontSize = '24px';
  }

  /*
  2. Установите всем элементам с классом "product" внешний отступ справа 50px.
   */
  const elProducts = document.querySelectorAll('.product');
  for (const elProduct of elProducts) {
    elProduct.style.marginRight = '50px';
  }

  /*
  3. При клике на кнопку "В корзину" название кнопки должно поменяться на
  "Добавлено" и кнопка должна стать неактивной.
   */

  // /*корзину не надо было но смотрю поняла я или нет*/

  const elCartCount = document.querySelector('.cartcount');
  let cartCountprod = 0;

  // //делала по инструкции с window.onload пока не разобралась
  // window.onload = function (){
  //   let k = document.getElementsByTagName("button");
  //   for(var i = 0; i < k.length; i++)
  //     k[i].onclick = function (){
  //       this.textContent = "Добавлено";
  //       this.disabled = true;
  //       cartCountprod++;
  //       elCartCount.textContent = cartCountprod.toString() + " товар(а)";
  //     }
  // }

  //если делать как на уроке
  //ждем клик
  document.body.addEventListener('click', el => {
    //получаем куда кликнули
    const button = el.target;
    //если это не кнопка - ничего не делаем
    if (button.tagName !== "BUTTON") {
      return;
    }
    //это была кнопка
    button.textContent = 'Добавлено';
    button.disabled = true;
    cartCountprod++;
    elCartCount.textContent = cartCountprod.toString() + " товар(а)";
  });



  /*
  4. Создайте полную (глубокую) копию элемента с классом product, измените в
  этой копии путь до картинки на:
  https://picsum.photos/id/1080/200/300
  Поставьте название товара в данной копии "Товар 4" и замените последний
  отображенный товар на странице на созданную копию. У данной копии также
  должен правильно работать код из 3-го задания.
   */
  const productCopy = document.querySelector('.product').cloneNode(true);
  productCopy
          .querySelector('img')
          .src = 'https://picsum.photos/id/1080/200/300';
  productCopy.querySelector('.productName').textContent = 'Товар 4';

  //смотрю что скопировалось и добавляется, 3 задание пока работает
  //document.querySelector('.product').prepend(productCopy);

  //перестает работать, если добавить блок с корзиной после всего, последним дивом
  //это странно так как оно вобще никак не связано
  // если крозину положить первым блоком - задание 3 работает прекрасно
  document.querySelector('.product:last-of-type').replaceWith(productCopy);

  /*
  5. По истечению 2 секунд с момента открытия страницы первый товар должен быть
  удален из html.
   */
  setTimeout(() => document.querySelector('.product').remove(), 2000);

</script>
</body>
</html>